---
title: color_extraction_zh-CN
date: 2025-10-19 10:51:05
author: DDLG
categories: DynamicColor
tags: DynamicColor
---
# 颜色提取

## 背景

### 来自壁纸

用户生成的颜色来自用户的个人壁纸。通过称为“量化”的过程对壁纸进行数字分析，并选择一种颜色作为源颜色。

![从壁纸中提取红色源颜色](/images/wallpaper_based_color.png)

### 来自应用内内容

基于内容的颜色来自应用内内容，例如专辑缩略图、徽标或视频预览。与用户生成的颜色一样，图像通过量化进行数字分析，并选择一种颜色作为源颜色。

![从播客封面中提取蓝色源颜色](/images/content_based_color.png)

## 从图像中提取颜色

### 量化

这是一种有损压缩过程，用于选择有限数量的不同颜色，以最好地再现原始图像的外观。推荐的量化器是 Celebi，它使用了 Wu 和 WSMeans 的结果。

### 评分

根据颜色对 UI 主题的适用性对其进行评估和排名。它优先考虑在给定图像中既美观又常用的颜色。评分的主要用途是提取一组主要且鲜艳的颜色，用作生成动态配色方案的源颜色。

关键指标包括：

- **颜色多样性：** 该算法通过为在色轮上 30 度邻域内图像中充分表示的色调赋予更高的分数来促进视觉上不同的颜色。它还迭代测试不同的最小色调差异，以找到一组满足所需颜色数量同时保持良好色调分布的颜色。

- **鲜艳的色度：** 接近目标色度 48.0 的颜色会获得更高的分数。色度非常低（接近灰度）或在图像中极为罕见的颜色将被过滤掉。

## 应用于颜色主题

有没有想过 Pixel 如何从手机壁纸中提取颜色来创建易于访问且美观的 UI？步骤可总结如下：

1. 量化以从壁纸中获取一组代表性颜色。
2. 评分以获得合适的源颜色。
3. 通过将生成的源颜色与可用的方案变体配对，向用户呈现主题选项，并让他们选择。
4. 从用户选择的主题创建色调调色板。
5. 使用这些色调调色板中的值为 Material 颜色角色分配。
6. 颜色通过 Material 令牌应用于 UI。

## 引用
- [Dynamic Color](https://github.com/material-foundation/material-color-utilities)
